<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        table,table tr th, table tr td { border:1px solid #0094ff; }
        table { width: 400px; height: 400px; border-collapse: collapse; margin: auto;}
    </style>
</head>
<body style="padding: 0; margin: 0;">
    <div id="pan" style="position: relative; background-color: #f5f5dc; width: 440px; height: 440px; margin: auto;">
        <div id="points" style="position: absolute; top: 0; left: 0;"></div>
        <div id="realBoard" style="position: absolute; top: 0; left: 0; z-index: 999; width: 440px; height: 440px;"></div>
    </div>
    <button id="ohNo">悔棋</button>
    <script src="../../static/js/jquery.min.js"></script>
<script>
    $(function () {
        let rowsLength=10;  //行
        let colLength=10;   //列
        let tableHtml = "";
        tableHtml += "<table id='board' border='1' style='position: absolute; left: 20px; top: 20px;'>";
        for (let i = 0; i < rowsLength; i++) {
            tableHtml += "<tr>";
            for (let j = 0; j < colLength; j++) {
                tableHtml += "<td></td>"
            }
            tableHtml += "</tr>"
        }
        tableHtml += "</table>";
        $("#pan").prepend(tableHtml);

        $("#realBoard").bind("click", function (event) {
            let x = event.pageX - $(event.target).offset().left - 20;
            let y = event.pageY - $(event.target).offset().top - 20;
            let xR = Math.round(x / 40);
            let yR = Math.round(y / 40);
            for (let i = 0; i < history.length ; i++) {
                let his = history[i];
                if (his.x === xR && his.y === yR) {
                    console.log('Not Allow');
                    return;
                }
            }
            nowPointColor++;
            let point = {x: xR, y: yR};
            drawPoint(point);
            history.push(point);
        });

        let nowPointColor = 0;
        let history = [];
        $(".point").click(function () {
            console.log('Not Allow');
        });
        $("#ohNo").click(function () {
            nowPointColor--;
            $(".point:last").remove();
            if (!history.pop()) {
                console.log("Not Allow!")
            }
        });
        function drawPoint(point) {
            $("#points").append("<div class='point' onclick='console.log(\"Not Allow\");' style='background-color: " +
                (nowPointColor % 2 === 0 ? 'black' : 'white') + ";" +
                "width: 30px; height: 30px; border-radius: 15px;" +
                "position: absolute; top: " + (5 + 40 * point.y) +
                "px; left: " + (5 + 40 * point.x) + "px;'></div>")
        }
    });
</script>
</body>
</html>